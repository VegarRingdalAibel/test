{"version":3,"sources":["/samples/realworld-sample/src/routes/profile-route.ts"],"names":["lit_html_1","$fsx","r","core_1","profileservice_1","sharedstate_1","marked","unsafe_html_1","router_1","default_1","HTMLElement","[object Object]","super","this","curRoute","profileService","instance","ProfileService","sharedState","SharedState","subscribe","routechange","bind","x","options","name","render","_x","params","username","profile","get","currentUser","value","markup","renderer","Renderer","isAuthenticated","following","follow","unfollow","location","hash","html","image","undefined","unsafeHTML","markedhtml","bio","isUser","onToggleFollowing","href","tslib_1","__decorate","customElement"],"mappings":"mGAAAA,EAAAC,KAAAC,EAAA,IACAC,EAAAF,KAAAC,EAAA,IACAE,EAAAH,KAAAC,EAAA,IACAG,EAAAJ,KAAAC,EAAA,IACAI,EAAAL,KAAAC,EAAA,IAEAK,EAAAN,KAAAC,EAAA,IACAM,EAAAP,KAAAC,EAAA,GAGA,IAAAO,EAAA,cAA6BC,YAQzBC,cACIC,QALGC,KAAAC,SAAW,GAOdD,KAAKE,eAAiBZ,EAAAa,SAASZ,EAAAa,gBAC/BJ,KAAKK,YAAcf,EAAAa,SAASX,EAAAc,aAGhCR,oBACIR,EAAAiB,UAAU,cAAeP,KAAMA,KAAKQ,YAAYC,KAAKT,OAGzDF,YAAYY,GACRV,KAAKC,SAAWS,EAAEC,QAAQC,KAC1BZ,KAAKa,SAGFf,eAAegB,EAAYC,GAC9Bf,KAAKgB,SAAWD,EAAOH,KACvBZ,KAAKiB,cAAgBjB,KAAKE,eAAegB,IAAIlB,KAAKgB,UAG/ClB,SACH,SAAIE,KAAKiB,UAAWjB,KAAKK,YAAYc,cAC1BnB,KAAKiB,QAAQD,WAAchB,KAAKK,YAAYc,YAAYH,SAMhElB,WAAWsB,GACd,IAAIC,EACJ,GAAID,EAAO,CACP,MAAME,EAAW,IAAI7B,EAAO8B,SAC5BF,EAAS5B,EAAO2B,EAAO,CAAEE,SAAUA,SAEnCD,EAAS,GAGb,OAAOA,EAGJvB,oBACCE,KAAKK,YAAYmB,iBACjBxB,KAAKiB,QAAQQ,WAAazB,KAAKiB,QAAQQ,UACnCzB,KAAKiB,QAAQQ,UACbzB,KAAKE,eAAewB,OAAO1B,KAAKiB,QAAQD,UAExChB,KAAKE,eAAeyB,SAAS3B,KAAKiB,QAAQD,UAE9ChB,KAAKa,UAELe,SAASC,KAAO,QAIjB/B,SACH,OAAOX,EAAA2C;;;;;;;;;kCASmB9B,KAAKiB,QACD9B,EAAA2C;qDACe9B,KAAKiB,QAAUjB,KAAKiB,QAAQc,WAAQC;wCAEnD;;;;kCAIHhC,KAAKiB,QAIF,GAHA9B,EAAA2C;;;;sCAKA9B,KAAKiB,QAAQD,SAAWhB,KAAKiB,QAAQD,SAAW;;sCAEhDtB,EAAAuC,WAAWjC,KAAKkC,WAAWlC,KAAKiB,QAAQkB;;;;;;mCAM3CnC,KAAKoC,UAAYpC,KAAKiB,QACnB9B,EAAA2C;;;uDAGiB9B,KAAKqC;;;uDAGLrC,KAAKiB,QAAQQ,UAAY,WAAa,YAAYzB,KAAKiB,QAAQD;;wCAGhF;;;;kCAIJhB,KAAKoC,UAAYpC,KAAKiB,QAClB9B,EAAA2C;oDACcnC,EAAA2C,KAAK;;;wCAInB;;;;;;;;;;;;;8DAa0C,cAAlBtC,KAAKC,SAA2B,SAAW;mDACtDN,EAAA2C,KAAK,UAAW,CAAC1B,KAAKZ,KAAKgB;;;;;;8DAME,cAAlBhB,KAAKC,SAA2B,SAAW;mDACtDN,EAAA2C,KAAK,YAAa,CAAC1B,KAAKZ,KAAKgB;;;;;;;;;;;;YAxIhFpB,EAAA2C,EAAAC,WAAA,CADClD,EAAAmD,cAAc","file":"06f5a9648-routes-profile-route","sourcesContent":["import { html } from 'lit-html';\r\nimport { customElement, instance, subscribe } from '@lit-html-free/core';\r\nimport { ProfileService } from 'src/resources/services/profileservice';\r\nimport { SharedState } from 'src/resources/state/sharedstate';\r\nimport * as marked from 'marked';\r\n\r\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html';\r\nimport { href } from '@lit-html-free/router';\r\n\r\n@customElement('profile-comp')\r\nexport default class extends HTMLElement {\r\n    public username: any;\r\n    public profile: any;\r\n    public curHash: any;\r\n    public curRoute = '';\r\n    public sharedState: SharedState;\r\n    public profileService: ProfileService;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.profileService = instance(ProfileService);\r\n        this.sharedState = instance(SharedState);\r\n    }\r\n\r\n    connectedCallback() {\r\n        subscribe('routeChange', this, this.routechange.bind(this));\r\n    }\r\n\r\n    routechange(x: any) {\r\n        this.curRoute = x.options.name;\r\n        this.render();\r\n    }\r\n\r\n    public async activate(_x: string, params: any) {\r\n        this.username = params.name;\r\n        this.profile = await this.profileService.get(this.username);\r\n    }\r\n\r\n    public isUser() {\r\n        if (this.profile && this.sharedState.currentUser) {\r\n            return this.profile.username ===  this.sharedState.currentUser.username;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public markedhtml(value: any) {\r\n        let markup: string;\r\n        if (value) {\r\n            const renderer = new marked.Renderer();\r\n            markup = marked(value, { renderer: renderer });\r\n        } else {\r\n            markup = '';\r\n        }\r\n\r\n        return markup;\r\n    }\r\n\r\n    public onToggleFollowing() {\r\n        if (this.sharedState.isAuthenticated) {\r\n            this.profile.following = !this.profile.following;\r\n            if (this.profile.following) {\r\n                this.profileService.follow(this.profile.username);\r\n            } else {\r\n                this.profileService.unfollow(this.profile.username);\r\n            }\r\n            this.render();\r\n        } else {\r\n            location.hash = 'login';\r\n        }\r\n    }\r\n\r\n    public render() {\r\n        return html`\r\n            <div class=\"profile-page\">\r\n                <div class=\"user-info\">\r\n                    <div class=\"container\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-xs-12 col-md-10 offset-md-1\">\r\n                                <!-- \r\n                                        -----------------------------------\r\n                                    -->\r\n                                ${this.profile\r\n                                    ? html`\r\n                                          <img src=${this.profile ? this.profile.image : undefined} class=\"user-img\" />\r\n                                      `\r\n                                    : ''}\r\n                                <!-- \r\n                                        -----------------------------------\r\n                                    -->\r\n                                ${!this.profile\r\n                                    ? html`\r\n                                          <div class=\"user-img\"></div>\r\n                                      `\r\n                                    : ''}\r\n\r\n                                <h4>${this.profile.username ? this.profile.username : 'loading..'}</h4>\r\n                                <p>\r\n                                    ${unsafeHTML(this.markedhtml(this.profile.bio))}\r\n                                </p>\r\n\r\n                                <!-- \r\n                                        -----------------------------------\r\n                                    -->\r\n                                ${!this.isUser() && this.profile\r\n                                    ? html`\r\n                                          <button\r\n                                              class=\"btn btn-sm btn-outline-secondary action-btn\"\r\n                                              @click=${this.onToggleFollowing}\r\n                                          >\r\n                                              <i class=\"ion-plus-round\"></i>\r\n                                              &nbsp; ${this.profile.following ? 'Unfollow' : 'Follow'} ${this.profile.username}\r\n                                          </button>\r\n                                      `\r\n                                    : ''}\r\n                                <!-- \r\n                                        -----------------------------------\r\n                                    -->\r\n                                ${this.isUser() && this.profile\r\n                                    ? html`\r\n                                          <a href=${href('Settings')} class=\"btn btn-sm btn-outline-secondary action-btn\">\r\n                                              <i class=\"ion-gear-a\"></i> Edit Profile Settings\r\n                                          </a>\r\n                                      `\r\n                                    : ''}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"container\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-xs-12 col-md-10 offset-md-1\">\r\n                            <div class=\"articles-toggle\">\r\n                                <ul class=\"nav nav-pills outline-active\">\r\n                                    <li class=\"nav-item\">\r\n                                        <a\r\n                                            class=\"nav-link ${this.curRoute !== 'Favorites' ? 'active' : ''}\"\r\n                                            href=${href('MyPosts', {name:this.username})}\r\n                                            >My Posts</a\r\n                                        >\r\n                                    </li>\r\n                                    <li class=\"nav-item\">\r\n                                        <a\r\n                                            class=\"nav-link ${this.curRoute === 'Favorites' ? 'active' : ''}\"\r\n                                            href=${href('Favorites', {name:this.username})}\r\n                                            >Favorited Posts</a\r\n                                        >\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                            <free-router name=\"subProfile\"> </free-router>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n"]}